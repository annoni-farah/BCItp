<TargetStart>:

    game: game 

    BoxLayout:
        orientation: 'vertical'
        spacing: 10
        padding: 20    

        BoxLayout:
            orientation: 'horizontal'
            spacing: 30
            padding: 20

            BoxLayout:
                size_hint_x: 0.1

                Bar:
                    orientation: 'bt'
                    color: root.accum_color_left
                    animated: False
                    value: root.
                    value: root.accum_prob_left

                Bar:
                    orientation: 'bt'
                    color: [0,1,0,0.7]
                    animated: False
                    value: root.inst_prob_left

            RelativeLayout:
                size_hint_x: 0.8

                Game:
                    id: game

            BoxLayout:
                size_hint_x: 0.1

                Bar:
                    orientation: 'bt'
                    color: root.accum_color_right
                    animated: False
                    value: root.accum_prob_right

                Bar:
                    orientation: 'bt'
                    color: [0,1,0,.7]
                    animated: False
                    value: root.inst_prob_right

        BoxLayout:
            orientation: 'horizontal'
            size_hint: (1, 0.2)
            spacing: 10


            BoxLayout:
                orientation: 'vertical'
                size_hint: (0.3, 1)

                Button:
                    text: root.label_on_toggle_button
                    on_press: root.toogle_stream()
                    size_hint: None,None
                    size: 200,50

                Button:
                    text: 'Back'
                    on_press: root.change_to_game()
                    size_hint: None,None
                    size: 200,50

            BoxLayout:
                size_hint: (0.7, 1)

                canvas:
                    Color:
                        rgba: (.2,.2,.2,1)
                    Rectangle:
                        size: self.size
                        pos: self.pos

                    Color:
                        rgba: root.label_color
                    Rectangle:
                        size: (10, self.height)
                        pos: (self.pos[0] + root.label_position*self.width, self.pos[1])

                Label: 
                    text: 'Current Label: ' + str(root.current_label)


<Game>:

    player: game_player
    target: game_target

    canvas:
        Color:
            rgba: (.1, .1, .1, 1)
        Rectangle:
            pos: self.pos
            size: self.size



    GamePlayer:
        id: game_player
        size_hint: (None, None)

    GameTarget:
        id: game_target
        size_hint: (None, None)




<GamePlayer>:
    
    size_hint: (None, None)
    size: (30,30)

    canvas:

        Color:
            rgba: (1, 1, 1, 1)

        Triangle:
            points: self.points


<GameTarget>:
    
    size_hint: (None, None)
    size: (50,50)

    canvas:
        Color:
            rgba: root.t_color

        Rectangle:
            pos: root.pos
            size: self.size

