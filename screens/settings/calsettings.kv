<CalSettings>:

    on_pre_enter: if root.sh.cal.flag: root.update_settings()

    BoxLayout:
        orientation: 'vertical'

        StdSettingsContainer:
            pos_hint: {'top': 1}
            size_hint: (1, 1)

            StdSettingTitle:
                title: 'Calibration and Validation Settings'
                desc: 'Set config for input data'

            StdSettingSlider:
                id: n_runs
                title: 'Number of Runs'
                type: 'int'
                desc: 'A run is a set of trials'
                value: 4
                min: 1
                max: 200

            StdSettingSlider:
                id: n_trials
                title: 'Number of Trials per run'
                type: 'int'
                desc: 'Number of trials to be displayed per run (must be even)'
                value: 14
                min: 1
                max: 200

            StdSettingSlider:
                id: runs_interval
                title: 'Time interval in seconds between runs'
                type: 'float'
                desc: 'A run is a set of trials.'
                value: 30
                min: 0
                max: 120

            StdSettingSlider:
                id: pause_offset
                title: 'Pause Offset (s)'
                type: 'float'
                desc: 'Time in seconds to wait at the beginning of a new trial'
                value: 0
                min: 0
                max: 10

            StdSettingSlider:
                id: cue_offset
                title: 'Cue Offset (s)'
                type: 'float'
                desc: 'Time in seconds from the beginning of a trial until the cue display'
                value: 0
                min: 0
                max: 20

            StdSettingSlider:
                id: cue_time
                title: 'Cue display time (s)'
                type: 'float'
                desc: 'Duration in seconds of cue display'
                value: 7
                min: 0
                max: 20

            StdSettingSlider:
                id: end_trial_offset
                title: 'End Of Trial Offset (s)'
                type: 'float'
                desc: 'Time in seconds from the beginning of a trial to the point when the trial ends'
                value: 8
                min: cue_offset.value + cue_time.value + 1
                max: 20

        GridLayout:
            rows: 1
            size_hint: (1, None)
            height: 50
            spacing: 5
            padding: 5

            Button:
                font_size: 20
                text: 'Back'
                on_press: root.change_to_cal()

            Button:
                font_size: 20
                text: 'Save'
                on_press: root.save_config()

