<MlMenu>:

    on_pre_enter: if root.sh.ml.flag: root.update_settings()

    BoxLayout:
        orientation: 'vertical'

        StdSettingsContainer:
            pos_hint: {'top': 1}
            size_hint: (1, 1)

            StdSettingTitle:
                title: 'Epoch Extraction Settings'
                desc: 'Define the epoch limits'

            StdSettingString:
                id: class_ids
                title: 'Event Ids'
                desc: 'List of event labels for epoch extraction. ex: 1 2'
                value: '1 2'

            StdSettingSlider:
                id: epoch_start
                title: 'Epoch Start'
                type: 'float'
                desc: 'Time in sec after the event when the epoch starts'
                value: 2.5
                min: -5
                max: 5

            StdSettingSlider:
                id: epoch_end
                title: 'Epoch End'
                type: 'float'
                desc: 'Time in sec after the event when the epoch ends'
                value: 4.5
                min: epoch_start.value
                max: 5

            StdSettingTitle:
                title: 'Machine Learning Settings'
                desc: 'Set parameters of machine learning algorithms'

            StdSettingSlider:
                id: csp_nei
                title: 'Number of CSP eigenvectors'
                type: 'int'
                desc: 'Must be an even number'
                value: 8
                min: 2
                max: 16

            StdSettingSlider:
                id: n_iter
                title: 'Number of Cross Validation Iteractions'
                type: 'int'
                desc: 'The model will be trained and applied '
                value: 10
                min: 1
                max: 20

            StdSettingSlider:
                id: test_perc
                title: 'Fraction of test epochs for cross validation'
                type: 'float'
                desc: 'For each iteraction, the model will be trained using (1-perc) and tested on perc of the dataset'
                value: 0.2
                min: 0.1
                max: 0.8

        GridLayout:
            rows: 1
            size_hint: (1, None)
            height: 50
            spacing: 5
            padding: 5

            Button:
                font_size: 20
                text: 'Back'
                on_press: root.change_to_bci()

            Button:
                font_size: 20
                text: 'Train Model'
                on_press: root.get_ml_model()

